var Alins=function($){"use strict";function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function F(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D(r.key),r)}}function n(e,n,t){n&&F(e.prototype,n),t&&F(e,t),Object.defineProperty(e,"prototype",{writable:!1})}function u(e,n,t){return(n=D(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function M(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,u=[],c=!0,l=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(u.push(r.value),u.length!==n);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(e,n)||P(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,n){if(e){if("string"==typeof e)return B(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?B(e,n):void 0}}function B(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function p(e,n){var t,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=P(e))||n&&e&&"number"==typeof e.length)return r&&(e=r),t=0,{s:n=function(){},n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function D(e){e=function(e,n){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return("string"===n?String:Number)(e);if("object"!=typeof(t=t.call(e,n||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}var g=Symbol("t"),A=Symbol("u"),q=Symbol("c"),b=Symbol("e"),a=Symbol("t"),W=Symbol("pp");function z(t,e,r){return t[A].shallow?e:e.map(function(e,n){return e&&"object"===m(e)&&!C(e)?T(e,{commonLns:t[A].commonLns,path:t[A].path,key:"".concat(r+n)}):e})}function y(e,n,t,r,i,o){null!=(e=e[a])&&e.forEach(function(e){e({type:n,data:r,index:t,count:i,fromAssign:o})})}function U(e,n){e[A].replaceLns=!1;n=n();return delete e[A].replaceLns,n}$.AlinsType=void 0,(e=$.AlinsType||($.AlinsType={}))[e.Proxy=1]="Proxy",e[e.Ref=2]="Ref",e[e.BindResult=3]="BindResult",$.OprateType=void 0,(e=$.OprateType||($.OprateType={}))[e.Replace=0]="Replace",e[e.Remove=1]="Remove",e[e.Insert=2]="Insert",e[e.Push=3]="Push",e[e.Sort=4]="Sort";var H={splice:function(e,n){var t=this.target,r=this.origin;e>=t.length?(e=t.length,n=0):(void 0===n||e+n>t.length)&&(n=t.length-e);for(var i=arguments.length,o=new Array(2<i?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];var u=o.length,c=Math.min(n,u),l=e+c;n<u?(c=z(t,o.slice(c),l),y(t,$.OprateType.Insert,l,c,c.length)):(c=n-u,y(t,$.OprateType.Remove,l,t.slice(l,l+c),c));for(var s=e;s<l;s++){var f=o[s-e];y(t,$.OprateType.Replace,s,[f,t[s]],1)}var h=t[A].scopeItems,d=null==h?void 0:h.slice(e,e+o.length).map(function(e){return e[h.key].v});return U(t,function(){return r.call.apply(r,[t[A].proxy,e,n].concat(v(d)))})},push:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=this.target,i=this.origin,n=z(r,n,r.length);return y(r,$.OprateType.Push,r.length,n,n.length),i.call.apply(i,[r[A].proxy].concat(v(n)))},pop:function(){var e=this.target,n=this.origin;return 0<e.length&&y(e,$.OprateType.Remove,e.length-1,[e[e.length-1]],1),n.call(e[A].proxy)},unshift:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=this.target,i=this.origin,n=z(r,n,0);return y(r,$.OprateType.Insert,0,n,n.length),U(r,function(){return i.call.apply(i,[r[A].proxy].concat(v(n)))})},shift:function(){var e=this.target,n=this.origin;return 0<e.length&&y(e,$.OprateType.Remove,0,e[0],1),n.call(e[A].proxy)},replace:function(e,n,t,r){y(e,$.OprateType.Replace,n,[r,t],1),e[n]=r}},G={};function X(e){G.map=e}function J(e,n,t){return H[n]&&e[a]&&!e[n].hack?(e[n]=H[n].bind({target:e,origin:e[n]}),e[n].hack=!0,e[n]):G[n]?G[n].bind(e):Reflect.get(e,n,t)}function K(e,n,t){return e[a]?(H.replace(e,parseInt(n),e[n],t),!0):b}function Q(e,n){if(!e[a])return b;n[a]=e[a];for(var t=e.length,r=n.length,i=Math.min(t,r),o=0;o<i;o++)y(e,$.OprateType.Replace,o,[n[o],e[o]],1),e[A].data[o]=n[o];return t!==r&&(r<t?(y(e,$.OprateType.Remove,i,null,t-r),e.splice(i)):(t=n.slice(i),e.push.apply(e,v(t)))),!0}var i=null;function V(e){i=e}function Y(){return i}function Z(e,n){V(e);e=n();return V(null),e}function ee(){var n=[];return i={clean:function(){n.forEach(function(e){e()}),n=null},collect:function(e){n&&n.push(e)}}}var _=null,E=!1;function ne(){return E}function te(e,n){_=n=n||e,E=!1;n=e();return _=null,n}function C(e){if(1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(null==e||!e[A]))return!1;e=null==e?void 0:e[g];return e===$.AlinsType.Proxy||e===$.AlinsType.Ref}var e=C;function l(e){return u({v:e},g,$.AlinsType.Ref)}function re(e){return 1<arguments.length&&void 0!==arguments[1]&&arguments[1]||!e||"object"!==m(e)?u({v:e},g,$.AlinsType.Ref):e}function ie(a,n,e){function r(n,t,r,i,e){function o(e){e(t,r,"".concat(u.join("."),".").concat(n),n,i)}e&&null!=(e=a[A].commonLns)&&e.forEach(o),null!=(e=a[A].lns[n])&&e.forEach(o),null!=(e=a[A].extraLns)&&e.forEach(function(e){null!=(e=e[n])&&e.forEach(o)})}var u=n?[].concat(v(e),[n]):v(e),e=Array.isArray(a);a[A].commonLns&&(a[A].lns[n]=new Set,a[A].commonLns.forEach(function(e){a[A].lns[n].add(e)})),Object.assign(a[A],{path:u,triggerChange:r,forceWrite:function(e,n){if(n)return r(n,e,a[n]),e;for(var t in e)r(t,e[t],a[t]);Object.assign(a,e)},subscribe:function(e){var n,t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=a[A];for(n in w(r,"commonLns",e),a)w(r.lns,n,e),t&&C(a[n])&&a[n][A].subscribe(e,t)},isArray:e,forceUpdate:function(){for(var e in a)r(e,a[e],a[e])}})}function T(u){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.commonLns,t=e.lns,c=void 0===t?{}:t,t=e.shallow,l=void 0!==t&&t,s=e.set,i=e.get,t=e.path,f=void 0===t?[]:t,t=e.key,t=void 0===t?"":t,e=e.isProp,h=void 0!==e&&e;if("Object"!==(e=(e=u).constructor.name)&&"Array"!==e||C(u,!0))return u;if(!l){var r,o=u,a=f;for(r in o){var d=o[r];if(d&&"object"===m(d))try{o[r]=T(d,{path:a,key:r})}catch(e){console.warn(e)}}}u[g]||(u[g]=$.AlinsType.Proxy),u[A]={commonLns:n,lns:c,shallow:l,data:u},ie(u,t,f);var e=u[A],v=e.triggerChange,p=e.isArray,y=p?u.length:null,n=new Proxy(u,{get:function(e,n,t){var r="function"==typeof e[n];if(p&&r)return J(e,n,t);if("symbol"===m(n)||r){if(n===W)return!0}else{if(_)return E=E||!0,w(c,n,_),Reflect.get(e,n,t);if("v"===n&&i)return i()}return Reflect.get(e,n,t)},set:function(r,i,o,a){function e(){var e,n,t=Reflect.set(r,i,o,a);return p&&"length"!==i&&null!=(e=c.length)&&e.size&&u.length!==y&&Promise.resolve().then(function(){(n=u.length)!==y&&(v("length",n,y,!1,!1),y=n)}),t}if("symbol"===m(i)||"function"==typeof r[i])return e();var n=null;if(p&&"length"===i?(n=y,y=u[i]):n=r[i],o===n&&(null==(t=r[A])||!t._map))return!0;if(null===s)return console.warn("".concat(h?"props":"Computed"," 不可设置")),!0;if("v"===i&&s)return s(o,n,"".concat(f.join("."),".").concat(i),i),!0;o&&"object"===m(o)&&!l&&(C(o)?(o[W]||(o=o[A].proxy),C(n)&&!1!==u[A].replaceLns&&oe(o,n)):(null!=n&&n[A]&&(n[A].removed=!0),o=T(o,{commonLns:r[A].commonLns,lns:null==(t=null==n?void 0:n[A])?void 0:t.lns,shallow:l,path:f,key:i})));var t=b;return p&&/^\d+$/.test(i)&&(t=K(r,i,o)),(t=Array.isArray(o)&&Array.isArray(n)?Q(n,o):t)===b&&(t=e()),v(i,o,n,!1,void 0===n),t},deleteProperty:function(e,n){return v(n,void 0,e[n],!0),Reflect.deleteProperty(e,n)}});return u[A].proxy=n}function oe(e,n){var t,r,i=e[A],o=n[A];for(r in o.extraLns&&o.extraLns.has(i.lns)?(t=i.lns,i.lns=o.lns,o.lns=t,o.extraLns.delete(t)):i.extraLns?i.extraLns.add(o.lns):i.extraLns=new Set([o.lns]),e)C(e[r])&&C(n[r])&&oe(e[r],n[r])}function w(e,n,t){var r=e[n];(r=r||(e[n]=new Set)).has(t)||(i&&"v"===n&&i.collect(function(){r.delete(t),t=null}),r.add(t))}function ae(e){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return C(e.v)?e:T(re(e),{shallow:n})}function ue(e,n){return ae({v:e},n="boolean"!=typeof n?"object"===m(null==e?void 0:e.v)&&C(e.v):n)}function c(e){var n,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r="function"==typeof e,i=r?e:e.get,r=r?null:e.set,o=!1,a=null,e=te(i,function(){o?null!=n&&n[A].forceWrite(a,"v"):(o=!0,a=null==n?void 0:n[A].forceWrite(i(),"v"),o=!1)}),a=e;return E?n=T(re(e,!0),{set:r,get:i,isProp:t}):{v:e}}function d(o,a){var u,e=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return"function"==typeof o?(u=b,{v:u=te(o,function(e,n,t,r,i){e=o._update?e:o();if(function e(n,t,r,i){var o=!(2<arguments.length&&void 0!==r)||r,r=!(3<arguments.length&&void 0!==i)||i;if(n&&t&&"object"===m(n)&&"object"===m(t)&&(r||o)){if(Array.isArray(n)){if(n.length!==t.length)return}else if(Object.keys(n).length!==Object.keys(t).length)return;for(var a in n)if(!e(n[a],t[a],o,!1))return;return 1}return n===t}(u,e))return e;a(e,u,t,r,i),u=e})}):(C(o)&&o[A]&&o[A].subscribe(a,e),o)}function ce(e,n){e[a]?e[a].push(n):e[a]=[n]}function le(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return fe(n,!1)}function se(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return fe(n,!0)}function fe(i,o){return i.forEach(function(n,e){if(C(n)){var t,r={};for(t in n)!function(e){r[e]=function(){return n[e]},o&&(r[e]=c(r[e]))}(t);i[e]=r}}),Object.assign.apply(null,i)}var he=0,de={};var ve=0,t=null;function pe(e){if(e.__$removed)return e.__$removed(e),e.__$removed=null,void(--ve<=0&&(t.disconnect(),t=null))}function ye(e){e.setAttribute("__rm",""),t?ve++:(ve=1,(t=new window.MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&e.removedNodes.forEach(function(e){1===e.nodeType&&(pe(e),e.querySelectorAll("[".concat("__rm","]")).forEach(function(e){pe(e)}))})})})).observe(window.document.body,{childList:!0,subtree:!0}))}function r(n){return function(e){ge.add(n,e)}}s={},f=me=0;var s,me,f,ge={enter:function(){return f=me++},add:function(e,n){s[f]?s[f][e]?s[f][e].push(n):s[f][e]=[n]:s[f]=u({},e,[n])},fill:function(t,e,o){var a=s[e];if(a){delete s[e];var n,r=function(e){var r=a[e],n="$".concat(e),i=t[n];t[n]="mounted"===e?function(){function n(e){"function"==typeof e&&t.push(e)}var t=[];if(n(null==i?void 0:i(o)),r.forEach(function(e){n(e(o))}),0<t.length)return function(){t.forEach(function(e){return e(o)}),t=null}}:function(){null!=i&&i(o),r.forEach(function(e){e(o)})}};for(n in a)r(n)}}},be=r("created"),_e=r("appended"),Ee=r("mounted"),we=r("removed");function xe(e){return $.Renderer=e}function ke(e){return e?$.Renderer.isFragment(e)?e.firstChild:e:null}function x(e,n,t){var r,i=ke(n);i.__$mounted&&null!=(r=$.Renderer.onMounted)&&r.call($.Renderer,e,i,i.__$mounted),i.__$removed&&null!=(r=$.Renderer.onRemoved)&&r.call($.Renderer,e,i,i.__$mounted),t?e.insertBefore(n,t):e.appendChild(n),null!=(r=i.__$appended)&&r.call(i,i),i.__$appended=null}function Re(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"body";x(n="string"==typeof n?$.Renderer.querySelector(n):n,e)}function $e(e,n){return e.parentElement||e.parentNode||(1<arguments.length&&void 0!==n?n:null)}function Ae(e,n,t){t=e.indexOf(t);-1!==t&&(n=$.Renderer.isFragment(n)?Array.from(n.childNodes):[n],0===t?e.unshift.apply(e,v(n)):e.splice.apply(e,[t,0].concat(v(n))))}$.Renderer=void 0,"undefined"!=typeof window&&void 0!==window.document&&xe({querySelector:function(e){return document.querySelector(e)},createElement:function(e){return document.createElement(e)},createTextNode:function(e){return document.createTextNode(e)},createEmptyMountNode:function(){return document.createComment("")},createFragment:function(){return document.createDocumentFragment()},isFragment:function(e){return e instanceof DocumentFragment},isElement:function(e){return this.isFragment(e)||e instanceof Node},onMounted:function(e){var t;void 0===(t=e).__$count?t.__$count=1:t.__$count++,t.__$m_observer||(t.__$m_observer=new window.MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&e.addedNodes.forEach(function(e){var n;1===e.nodeType&&t&&e.__$mounted&&(n=e.__$mounted(e),e.__$mounted=null,"function"==typeof n&&(e.__$removed=n,ye(e)),t.__$count--,0===t.__$count&&(t.__$m_observer.disconnect(),t.__$m_observer=null,t=null))})})}),t.__$m_observer.observe(t,{childList:!0}))},onRemoved:function(e,n){ye(n)}});var Ce,h,k,Te=function(){function e(){o(this,e),this.cacheMap=new WeakMap,this.curCache=[],this.tasks=[]}return n(e,[{key:"get",value:function(e){var n,t,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=this.cacheMap.get(e);return void 0===i||r?("string"==typeof(r=e())&&(r=$.Renderer.createTextNode(r)),this.curCache=((t=r)?$.Renderer.isFragment(t)?Array.from(t.childNodes):Array.isArray(t)?t:[t]:null)||[],this.cacheMap.set(e,this.curCache),r):(this.curCache=i||[],n=function(e){if(!e)return null;var n,t=$.Renderer.createFragment(),r=p(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.appendChild(i)}}catch(e){r.e(e)}finally{r.f()}return t}(i),this.tasks.length&&(this.tasks.forEach(function(e){e(n)}),this.tasks=[]),n)}},{key:"refreshCache",value:function(e,n){if(!this.curCache)throw new Error("CurCache is null");var t=e.parentElement;if(t){for(var r=t.childNodes,i=r.length,o=!1,a=[],u=0;u<i;u++){var c=r[u];if(o){if(c===n)break;a.push(c)}c===e&&(o=!0)}for(var l=-1,s=-1,f=this.curCache.length,h=0;h<f;h++){var d=this.curCache[h];if(d===e)l=h;else if(d===n){s=h;break}}(t=this.curCache).splice.apply(t,[l+1,s-l-1].concat(a))}}},{key:"addTask",value:function(e){this.tasks.push(e)}}]),e}(),Se=(Ce=!1,h=[],k=null,{next:function(e){null!=(e.parent=k)&&k.children.push(e),h.push(e),k=e},back:function(){h.pop(),k=0===h.length?(Ce=!0,null):h[h.length-1]},visit:function(e,n){if(!Ce||k===e)return n();h=[e],k=e;e=n();return h=[],k=null,e},current:function(){return k}}),Le=function(){function e(){o(this,e),this.start=$.Renderer.createEmptyMountNode(),this.end=$.Renderer.createEmptyMountNode(),this.parent=null,this.children=[],this.branchCalls=[],this.activeIndex=-1,this.refreshList=[],this.initilized=!1,this.cache=new Te,Se.next(this)}return n(e,[{key:"wrapAnchor",value:function(e){var n=$.Renderer.createFragment();return n.appendChild(this.start),e&&x(n,e),n.appendChild(this.end),n}},{key:"add",value:function(e){this.branchCalls.push(e)}},{key:"getCache",value:function(e,n){var t=this;return Se.visit(this,function(){return t.cache.get(e,n)})}},{key:"initAnchor",value:function(e){return $.Renderer.isFragment(e)?(e.appendChild(this.end),e.insertBefore(this.start,e.childNodes[0]),e):this.wrapAnchor(e)}},{key:"replace",value:function(e,n){var t;if(e!==this.activeIndex)return t=this.branchCalls[e],this.activeIndex=e,e=this.getCache(t,n),this.initilized?(this.refresh(e),e):(this.initilized=!0,this.initAnchor(e))}},{key:"replaceDom",value:function(e){this.clear(),this.end.parentNode.insertBefore(e,this.end)}},{key:"refresh",value:function(e){var n;this.clear()?($.Renderer.isElement(e)&&null!=(n=this.end.parentElement)&&n.insertBefore(e,this.end),null!=(n=this.parent)&&n.refreshCache(this),this.triggerRefresh()):null!=(n=this.parent)&&n.addRefreshCall(this.refresh.bind(this,e))}},{key:"addRefreshCall",value:function(e){var n;this.start.parentElement?this.refreshList.push(e):null!=(n=this.parent)&&n.addRefreshCall(e)}},{key:"triggerRefresh",value:function(){var e;this.refreshList.length?(e=this.refreshList,this.refreshList=[],e.forEach(function(e){e()})):null!=(e=this.parent)&&e.triggerRefresh()}},{key:"quit",value:function(){Se.back()}},{key:"returned",value:function(e){return!1!==(e="number"==typeof e?this.branchCalls[e]:e).returned}},{key:"refreshCache",value:function(e){this.cache.refreshCache(e.start,e.end),null!=(e=this.parent)&&e.refreshCache(this)}},{key:"clear",value:function(){var e=this.start,n=this.end;if(!n.parentElement)return!1;for(;e.nextSibling&&e.nextSibling!==n;)e.nextSibling.remove();return!0}}]),e}();var Ne=function(){function t(e,n){o(this,t),this.activeIndex=-1,this.index=0,this.returnEle=b,this.matched=!1,this.refs=[],this.returnTrueEl=!1,this.branch=new Le,this.acceptIf(e,n)}return n(t,[{key:"switchNode",value:function(e,n){if(this.activeIndex===e)return!0;this.activeIndex=e;var t=this.branch.returned(e);return this.branch.replace(e,n=void 0===n?!t:n),t}},{key:"onDataChange",value:function(e){for(var n,t=e.length,r=0;r<t;r++)if(e[r])return n=this.switchNode(r),console.log("onDataChange",r,n),n||r===t-1||(n=this.switchNode(t-1,!0),console.log("onDataChange switchend",r,n)),n}},{key:"acceptIf",value:function(e,n){var t=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=this.index,i=this.index++;this.refs[i]=e,this.branch.add(n),this.returnEle!==b||this.matched&&!t||("function"==typeof e?e():e.v)&&(this.matched=!0,t||(this.activeIndex=r),e=this.branch.replace(i),this.branch.returned(n)&&(this.returnTrueEl=!0),this.returnEle=e)}},{key:"elif",value:function(e,n){return this.acceptIf(e,n),this}},{key:"else",value:function(e){return this.acceptIf(function(){return!0},e),this}},{key:"end",value:function(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){},t=(this.acceptIf(function(){return!0},n,!0),d(function(){return e.refs.map(function(e){return"function"==typeof e?e():e.v})},this.onDataChange.bind(this),!1),this.branch.quit(),this.returnEle);return this.returnTrueEl||this.branch.replaceDom(n()),this.returnEle=this.returnTrueEl=this.acceptIf=this.matched=null,t}}]),t}();function je(e,n){return new Ne(e,n)}var Oe=function(){function t(e,n){o(this,t),this.branch=new Le,this.target=e,this.caseList=n}return n(t,[{key:"run",value:function(e){for(var n=!1,t=null,r=this.caseList.length,i=0;i<r;i++){var o=M(this.caseList[i],2),a=o[0],o=o[1];if(Array.isArray(a)&&a.includes(e)||a===e||null===a){n=!0,a=this.branch.returned(o),t=this.branch.replace(i,!a);a||this.branch.replaceDom(this.endCall());break}}return t=n?t:this.branch.replace(r)}},{key:"end",value:function(){var e,n=this,t=(this.endCall=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){},d(this.target,function(e){n.run(e)})),r=p(n.caseList);try{for(r.s();!(e=r.n()).done;){var i=e.value[1];i&&n.branch.add(i)}}catch(e){r.e(e)}finally{r.f()}return n.branch.add(n.endCall),n.branch.quit(),this.run(t.v)}}]),t}();function Ie(e,n){return new Oe(e,n)}function Fe(c){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],v=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"item",p=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",y=this;if(!e)return y.map(c);var m=$.Renderer.createFragment(),e=C(y),n=y.length;if(e){for(var i,g,b=$.Renderer.createEmptyMountNode(),_=[],E=[],w=(i=Se.current(),{insertBefore:function(n,t,e){var r,e=$e(t,e);i?(r=i.cache,t.parentElement===e?(Ae(r.curCache,n,t),e.insertBefore(n,t)):r.addTask(function(e){Ae(r.curCache,n,t);try{e.insertBefore(n,t)}catch(e){console.warn(e)}})):e.insertBefore(n,t)},removeElement:function(n){var t,e;i?(t=i.cache,n.parentElement?(n.remove(),e=t.curCache.indexOf(n),t.curCache.splice(e,1)):t.addTask(function(){n.remove();var e=t.curCache.indexOf(n);t.curCache.splice(e,1)})):n.remove()},addTask:function(e){null!=i&&i.cache.addTask(e)}}),x=[],k=(y[A].scopeItems=x,y[A]._map=!0,x.key=v,function(e,n){e=T({v:e},{shallow:!0});e=u({},v,e);return p&&(e[p]=T({v:n},{shallow:!0})),e}),R=function(e,n){var t,r,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:x,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:_,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:E,u=k(e,n),e=ee(),a=(a.push(e),Z(e,function(){return c(u[v],u[p]||n)})),e=a;return a?$.Renderer.isFragment(a)?0===(r=(t=a.childNodes).length)?(e=$.Renderer.createEmptyMountNode(),a.appendChild(e),0===n&&(g=e)):(e=t[r-1],0===n&&(g=t[0])):0===n&&(g=a):(e=a=$.Renderer.createEmptyMountNode(),0===n&&(g=a)),i.push(u),o.push(e),a},t=0;t<n;t++){var r=y[t],r=R(r,t);m.appendChild(r)}m.appendChild(b),ce(y,function(e){var o=e.index,a=e.count,n=e.data;switch(e.type){case $.OprateType.Push:for(var t=$.Renderer.createFragment(),r=y.length,i=0;i<n.length;i++){var u=R(n[i],r+i);t.appendChild(u)}w.insertBefore(t,b,m);break;case $.OprateType.Replace:x[o]?(n[0]!==x[o][v].v&&(x[o][v].v=n[0]),p&&(x[o][p].v=o)):x[o]=k(n[0],o);break;case $.OprateType.Remove:if(0===a)break;var c=function(){for(var e,n=o-1,t=(null==(e=_[n+a])?void 0:e.nextSibling)||b,r=n<0?g||b:_[n];r.nextSibling&&r!==t&&r.nextSibling!==t;){var i=r.nextSibling;w.removeElement(i)}n<0&&(r!==b?(g=r.nextSibling,w.removeElement(r)):g=b),_.splice(o,a),x.splice(o,a),E.splice(o,a).forEach(function(e){e.clean()})};b.parentElement?c():w.addTask(c);break;case $.OprateType.Insert:var l=[],s=[],f=[],h=$.Renderer.createFragment(),d=g,c=(n.forEach(function(e,n){e=R(e,o+n,s,l,f);h.appendChild(e)}),x.splice.apply(x,[o,0].concat(s)),_.splice.apply(_,[o,0].concat(l)),E.splice.apply(E,[o,0].concat(f)),function(){var e=0===o?d||b:_[o-1].nextSibling;$e(e,m).insertBefore(h,e)});b.parentElement?c():w.addTask(c)}})}else for(var o=0;o<n;o++){var a=c(l(y[o]),l(o));a&&m.appendChild(a)}return m}function R(e,i){var n="object"===m(e)&&!C(e)&&void 0!==e.enable,t=n?e.value:e,o=!0,a="",a=Me(t,function(e,n,t,r){a=e,o&&i(e,n,t,r)});return n&&(o=d(e.enable,function(e){i((o=e)?a:null,null,"","")}).v),i(o?a:null,void 0,"",""),a}function Me(e,n){return"function"==typeof e||C(e)&&void 0!==e.v?d(e,n).v:e}X(Fe);var Pe={zIndex:1,opacity:1,flex:1,flexGrow:1,flexShrink:1},Be="_$single_style";function S(e,n,t,r,i){i=4<arguments.length&&void 0!==i&&i;"number"!=typeof t||Pe[n]||(t="".concat(t,"px")),e.style[n]=t=r?"":t,i&&(e[Be]||(e[Be]={}),e[Be][n]=t)}function De(s,e){if(null!=e){if("function"==typeof e||C(e)){var f="function"==typeof e;R(e,function(e,n,t,r,i){if("string"==typeof e)if(f){s.setAttribute("style",e);var o=s[Be];if(o)for(var a in o)s.style[a]=o[a]}else S(s,r,e,i);else{for(var u in e){var c=e[u];"function"==typeof c&&(c=c()),S(s,u,c)}for(var l in n)void 0===e[l]&&S(s,l,"")}})}else{if("object"!==m(e))return;for(var n in e)!function(n){R(e[n],function(e){S(s,n,e,null===e)})}(n)}return 1}}var qe={INPUT:1,SELECT:1,TEXTAREA:1};function We(d,e){if(null!=e)if("function"==typeof e||C(e))R(e,function(e,n,t,r,i){if("string"==typeof e){if(r&&"v"!==r)return void(i?d.removeAttribute(r):d.setAttribute(r,e));var o,i=e.matchAll(/(.*?)=(.*?)(&|$)/g),a=(e={},p(i));try{for(a.s();!(o=a.n()).done;){var u=o.value;e[u[1]]=u[2]}}catch(e){a.e(e)}finally{a.f()}var c,r=n.matchAll(/(.*?)=(.*?)(&|$)/g),l=(n={},p(r));try{for(l.s();!(c=l.n()).done;){var s=c.value;n[s[1]]=s[2]}}catch(e){l.e(e)}finally{l.f()}}for(var f in e)d.setAttribute(f,e[f]);for(var h in n)void 0===e[h]&&d.removeAttribute(h)});else{if("object"!==m(e))return;for(var n in e)!function(n){R(e[n],function(e){null===e?d.removeAttribute(e):d.setAttribute(n,e)})}(n)}}var ze="_$single_class";function L(e,n,t,r){t=2<arguments.length&&void 0!==t&&t,r=3<arguments.length&&void 0!==r&&r;e.classList[t?"remove":"add"](n),r&&(e[ze]||(e[ze]=new Set),e[ze][t?"delete":"add"](n))}function Ue(e,n){e.className=Array.from(new Set(n.split(" "))).join(" ");n=e[ze];if(n){var t,r=p(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.classList.add(i)}}catch(e){r.e(e)}finally{r.f()}}}function He(c,e){if(null!=e)if("function"==typeof e||C(e))R(e,function(e,n,t,r,i){if("string"==typeof e)Ue(c,e);else if("boolean"==typeof e)L(c,r,i||0==e);else{for(var o in e){var a=e[o];"function"==typeof a&&(a=a()),L(c,o,0==a)}for(var u in n)void 0===e[u]&&L(c,u,!0)}});else if("object"===m(e))for(var n in e)!function(n){R(e[n],function(e){L(c,n,!e)})}(n);else"string"==typeof e&&Ue(c,e)}function Ge(e,t,n){var r=ge.enter(),i={},o=null;if(t)for(var a in t)!function(e){var n=t[e];switch(e){case"$mount":o=n,delete t[e];break;case"$created":case"$appended":case"$mounted":case"$removed":i[e]=n,delete t[e];break;default:C(n)?t[e]=c(function(){return n.v},!0):t[e]=u({v:n},g,$.AlinsType.Ref)}}(a);e=e(t||{},n),ge.fill(i,r,e),n=function(e,t){if(e){var r,i;if(e instanceof Promise)return r=$.Renderer.createFragment(),i=$.Renderer.createEmptyMountNode(),r.appendChild(i),e.then(function(e){if($.Renderer.isElement(e)){var n=$e(i,r);try{null!=t&&t(e),x(n,e,i)}catch(e){console.log("node 已被隐藏")}finally{i.remove()}}}),r;null!=t&&t(e)}return e}(e,function(e){var n,t=ke(e);for(n in i){var r=i[n];"$created"===n?r(t):t["__".concat(n)]=r}});return o&&x(o="string"==typeof o?$.Renderer.querySelector(o):o,n),n}function Xe(f){var e,n,t;if(f.isText)n=$.Renderer.createTextNode(""),""!==f.text&&(r=f.text,(t=function(e){n.textContent=e})(Me(r,t),void 0,"",""));else{var r=!!f.tag,h=(n=r?$.Renderer.createElement(f.tag):$.Renderer.createFragment(),f.children&&0<f.children.length&&(null!=(t=f.attributes)&&t.$html?console.warn("$html 属性的元素的子元素将失效"):function e(n,t){var r,i=p(t);try{for(i.s();!(r=i.n()).done;){var o,a=r.value;null!=a&&(Array.isArray(a)?e(n,a):$.Renderer.isElement(a)?x(n,a):(o=Xe(Je(a)?a:{text:a,isText:!0}),n.appendChild(o)))}}catch(e){i.e(e)}finally{i.f()}}(n,f.children)),r?n:n.children[0]),r=r?n:n.firstChild,i=f.attributes;if(i){var o=i.$mount;if(r&&(null!=(e=i.$created)&&e.call(i,r),i.$appended&&(r.__$appended=i.$appended),i.$removed&&(r.__$removed=i.$removed),i.$mounted&&(r.__$mounted=i.$mounted)),h){var a,u=function(n){var e,t,r=f.attributes[n];if(c=h,t=r,(e=n).startsWith("on")&&((null===c[e]||"function"==typeof c[e])&&("function"==typeof t||"function"==typeof(null==t?void 0:t.listener)||"string"==typeof(null==t?void 0:t.__deco)||"function"==typeof(null==t?void 0:t.v)))){var i=h,o=n,a=r;if(o=o.substring(2),"function"==typeof a)i.addEventListener(o,a);else if(C(a))i.addEventListener(o,a.v);else{if(a.__deco){var u,c=a.__deco.split("-"),l=(a={listener:a.v},p(c));try{for(l.s();!(u=l.n()).done;){var s=u.value;a[s]=!0}}catch(e){l.e(e)}finally{l.f()}}i.addEventListener(o,function e(n){a.self&&n.target!==i||(a.stop&&n.stopPropagation(),a.prevent&&n.preventDefault(),a.once&&i.removeEventListener(o,e,a.capture),a.listener(n))},a.capture)}return"continue"}switch(n){case"$created":case"$appended":case"$removed":case"$mounted":case"$mount":break;case"$html":R(r,function(e){h.innerHTML=e||""});break;case"$ref":r(h);break;case"$attributes":We(h,r);break;case"$show":R(r,function(e){h.style.display=e?"":"none"});break;case"class":He(h,r);break;default:if("style"===n&&De(h,r)||function(n,e,t){if(("value"===t||"checked"===t)&&(C(e)||e.__deco)){var r,i,o,a=n.tagName;if(qe[a])return r=e.__deco||m(e.v),i=(i={boolean:function(e){return"true"===e},number:function(e){return parseFloat(e)},string:function(e){return e}}[r])||function(e){return e},o=e.__deco?e.v:e,n.addEventListener("SELECT"===a?"change":"input",function(){var e=n[t];r!==m(e)&&(e=i(e)),o.v=Number.isNaN(e)?"":e}),d(o,function(e){n[t]=e},!1),n[t]=o.v,1}}(h,r,n)||function(n,e,t){var r;if(e.startsWith("class$"))return r=e.substring("class$".length),R(t,function(e){L(n,r,!e,!0)}),1}(h,n,r)||function(n,e,t){var r;if(e.startsWith("style$"))return r=e.substring("style$".length),R(t,function(e){S(n,r,e,null===e,!0)}),1}(h,n,r))break;R(r,function(e){null===(e="object"===m(e)?e.enable?e.value:null:e)?h.removeAttribute(n):h.setAttribute(n,e)})}};for(a in f.attributes)u(a)}if(o){if(!(o="string"==typeof o?$.Renderer.querySelector(o):o))throw new Error("$mount is not a Element");x(o,n)}}}return n}function Je(e){return"object"===m(e)&&!0===e.jsx}var Ke=function(e){for(var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length,r=new Array(2<t?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];return"function"==typeof e?Ge(e,n,r):Xe({tag:e,attributes:n,children:r,jsx:!0})},Qe=Re;var Ve=ue,Ye=c,Ze=d;var en=le,nn=se;function tn(e,n,t,r,i){return Fe.call(e,n,t,r,i)}var rn=l,on=je,an=Ie;var N,j,un=be,cn=_e,ln=Ee,sn=we,O=((j=N=N||{})[j.Element=0]="Element",j[j.Text=1]="Text",j[j.Empty=2]="Empty",j[j.Frag=3]="Frag",{render:function(e){var n=new Array(e.deep).fill("  ").join(""),e="".concat(e.innerText);console.log("".concat(n,"text: ").concat(e.trim()))}});function fn(e,n){var t=null==(t=e._onMounted)?void 0:t.call(e,e);t&&(e._onRemoved=t),e.parentElement=n}var I=function(){function i(e){var n=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";o(this,i),this.type=N.Element,this.style={},this.tagName="",this.innerText="",this._attributes={},this._listeners={},this.deep=0,this._classList=new Set,this.classList={add:function(e){n._classList.add(e)},remove:function(e){n._classList.delete(e)}},this.parentElement=null,this.children=[],this.type=e,this.tagName=r,this.innerText=t}return n(i,[{key:"textContent",get:function(){return this.innerText},set:function(e){this.innerText=e}},{key:"addEventListener",value:function(e,n){var t;this._listeners[e]||(this._listeners[e]=new Set),this._listeners[e].add(n),null!=(t=O.addEventListener)&&t.call(O,this,e,n)}},{key:"removeEventListener",value:function(e,n){var t;this._listeners[e]&&this._listeners[e].delete(n),null!=(t=O.removeEventListener)&&t.call(O,this,e,n)}},{key:"setAttribute",value:function(e,n){this._attributes[e]=n}},{key:"removeAttribute",value:function(e){delete this._attributes[e]}},{key:"getAttribute",value:function(){return""}},{key:"className",get:function(){return Array.from(this._classList).join(" ")},set:function(e){this._classList=new Set(e.split(" "))}},{key:"parentNode",get:function(){return this.parentElement}},{key:"remove",value:function(){var e=null==(e=this.parentElement)?void 0:e.children;e&&(e.splice(e.indexOf(this),1),null!=(e=this._onRemoved)&&e.call(this,this))}},{key:"innerHTML",get:function(){return this.innerText}},{key:"outerHTML",get:function(){return this.innerText}},{key:"childNodes",get:function(){return this.children}},{key:"appendChild",value:function(e){if(e.type===N.Frag){var n,t=p(e.childNodes);try{for(t.s();!(n=t.n()).done;){var r=n.value;this.appendChild(r)}}catch(e){t.e(e)}finally{t.f()}}else this.children.push(e),fn(e,this)}},{key:"nextSibling",get:function(){var e;return(null==(e=this.parentElement)?void 0:e.children[this.index+1])||null}},{key:"insertBefore",value:function(e,n){if(n.parentElement!==this)throw new Error("insertBefore error");if(n.type===N.Frag){var t,r=p(n.childNodes);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.insertBefore(i,n)}}catch(e){r.e(e)}finally{r.f()}}else this.children.splice(n.index,0,e),fn(e,this);return e}},{key:"index",get:function(){var e=this.parentElement;return e?e.children.indexOf(this):-1}},{key:"render",value:function(){var e,n=this,t=null==(t=O.render)?void 0:t.call(O,this);return this.children.forEach(function(e){e.deep=n.deep+1,e.render()}),"function"==typeof t&&(t=t(this)),null!=(e=O.onRenderEnd)&&e.call(O,this),t}},{key:"_findName",value:function(e){if(this.tagName===e)return this;var n,t=p(this.children);try{for(t.s();!(n=t.n()).done;){var r=n.value._findName(e);if(r)return r}}catch(e){t.e(e)}finally{t.f()}return null}}]),i}();I.Root=null;return $.CustomElement=I,$._$ad=cn,$._$c=Ye,$._$cc=function(e,n){return c({get:e,set:n})},$._$cd=un,$._$ce=Ke,$._$e=en,$._$es=nn,$._$f=function(e,n){return Ke.apply(void 0,["",e].concat(v(n)))},$._$if=on,$._$md=ln,$._$mf=rn,$._$mm=tn,$._$mnr=function(e){return e.returned=!1,e},$._$mt=Qe,$._$mu=function(e){return e._update=!0,e},$._$r=Ve,$._$rd=sn,$._$sw=an,$._$w=Ze,$._if=je,$._switch=Ie,$.addLns=w,$.appendChild=x,$.appended=_e,$.arrayFuncProxy=J,$.assignCompData=se,$.assignData=le,$.child=q,$.computed=c,$.createCleaner=ee,$.createProxy=T,$.createStore=function(e){var t=e.id,r=e.state,i=e.actions,o=e.getters,t=t||"store_".concat(he++);return function(){var a=de[t];if(!a){if(a=T(r()),i)for(var e in i)a[e]=i[e].bind(a);if(o)for(var n in o)!function(e){Object.defineProperty(a,e,{get:function(){return o[e].call(a,a)},set:function(){throw new Error("Cannot set getters")}})}(n);(de[t]=a).$watch=function(e,n){var o;return"string"==typeof e&&(o=e,e=function(){for(var e=a,n=o,t="",r=0;r<n.length;r++){var i=n[r];"."===i||"["===i||"]"===i?t&&(e=e[t],t=""):t+=i}return e=t?e[t]:e}),d(e,n)}}return a}},$.createUtils=ie,$.created=be,$.defineRenderer=xe,$.empty=b,$.getCurCleaner=Y,$.getFirstElement=ke,$.getStore=function(e){return de[e]||null},$.isDepReactive=ne,$.isProxy=C,$.isReactive=e,$.isRef=function(e){return(null==e?void 0:e[g])===$.AlinsType.Ref},$.map=Fe,$.mockRef=l,$.mount=Re,$.mounted=Ee,$.observe=te,$.pureproxy=W,$.reactive=ae,$.reactiveBindingEnable=R,$.ref=ue,$.registArrayMap=X,$.removed=we,$.replaceArrayItem=K,$.replaceLNS=oe,$.replaceWholeArray=Q,$.setCurCleaner=V,$.trig=a,$.type=g,$.useCurCleaner=Z,$.useRenderer=function(){Object.assign(O,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),xe({querySelector:function(e){var n;return null==(n=I.Root)?void 0:n._findName(e)},createElement:function(){return new I(N.Element,"",0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")},createTextNode:function(e){return new I(N.Text,e)},createEmptyMountNode:function(){return new I(N.Empty)},createFragment:function(){return new I(N.Frag)},isFragment:function(e){return e.type===N.Frag},isElement:function(e){return e.type===N.Element||e.type===N.Text},onMounted:function(e,n,t){n._onMounted=t},onRemoved:function(e,n,t){n._onRemoved=t}});var e=new I(N.Element,"","root");return I.Root=e},$.util=A,$.version="",$.watch=d,$.watchArray=ce,$.watchRef=function(e,n){return d(e,n,!1)},$.wrapReactive=re,Object.defineProperty($,"__esModule",{value:!0}),$}({});
